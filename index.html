<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Food Inventory</title>
    <style>
        body {
            background-color: #3B1F0E;
            color: #FFD700;
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        h2 {
            margin-bottom: 10px;
        }

        .controls {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            width: 100%;
            max-width: 800px;
            align-items: center;
        }

        #notes {
            flex: 1;
            padding: 6px 10px;
            font-size: 1em;
            border: 2px solid #FFD700;
            background-color: #5A3320;
            color: #FFD700;
            border-radius: 4px;
        }

        button {
            width: 30px;
            height: 30px;
            font-size: 1em;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        button#reset-all {
            background-color: #228B22;
        }

        button#reset-text {
            background-color: #B22222;
        }

        .grid {
            display: flex;
            flex-direction: column;
            gap: 12px;
            width: 100%;
            max-width: 800px;
            overflow-y: auto;
        }

        .row {
            display: flex;
            justify-content: space-between;
            gap: 20px;
        }

        .cell {
            display: flex;
            align-items: center;
            gap: 6px;
            min-width: 150px;
            flex: 1;
        }

        .box {
            width: 20px;
            height: 20px;
            border: 2px solid #FFD700;
            cursor: pointer;
            border-radius: 4px;
            flex-shrink: 0;
        }

        .red {
            background-color: #B22222;
        }

        .green {
            background-color: #228B22;
        }

        .yellow {
            background-color: #CCCC00;
        }

        .blank {
            background-color: transparent;
            border: 2px solid #FFD700;
        }
    </style>
</head>

<body>

    <h2>Food Inventory</h2>
    <div class="controls">
        <button id="reset-all"></button>
        <input type="text" id="notes" placeholder="Write something..." />
        <button id="reset-text"></button>
    </div>

    <div class="grid" id="food-grid"></div>

    <script>
        const STATES = ["green", "red"];
        const YELLOW_STATES = ["blank", "yellow"];
        const FOOD_LIST = [
            ["Kale", "tomatoe"],
            ["Oranges", "Cucumber"],
            ["Craisins", "peanuts"],
            ["big nuts", "seeds"],
            ["Soy", "bananas"],
            ["kale", "Berries"],
            ["flax", "Margarine"],
            ["lemon", "lime"],
            ["Barley$", "Qunioa$"],
            ["corn$", "lentils$"],
            ["Bread", "Bagels"],
            ["Potatoes", "Popcorn"],
            ["Fried", "Sweet"]
        ];

        function createBox(key, states, defaultState) {
            const box = document.createElement("div");
            box.className = "box";
            let savedState = localStorage.getItem(key) || defaultState;
            box.classList.add(savedState);
            box.onclick = function () {
                const current = states.indexOf(states.find(s => box.classList.contains(s)));
                const next = (current + 1) % states.length;
                box.classList.remove(...states);
                box.classList.add(states[next]);
                localStorage.setItem(key, states[next]);
            };
            return box;
        }

        function createCell(name, isLeft) {
            const isDollar = name.includes("$");
            const clean = name.replace("$", "").trim();
            const outerKey = "outer_" + clean.toLowerCase();
            const innerKey = "inner_" + clean.toLowerCase();

            const cell = document.createElement("div");
            cell.className = "cell";

            if (isDollar && isLeft) {
                cell.appendChild(createBox(outerKey, STATES, "green"));
                cell.appendChild(createBox(innerKey, YELLOW_STATES, "blank"));
                const label = document.createElement("span");
                label.textContent = clean;
                cell.appendChild(label);
            } else if (isDollar && !isLeft) {
                const label = document.createElement("span");
                label.textContent = clean;
                cell.appendChild(label);
                cell.appendChild(createBox(innerKey, YELLOW_STATES, "blank"));
                cell.appendChild(createBox(outerKey, STATES, "green"));
            } else {
                if (isLeft) cell.appendChild(createBox(outerKey, STATES, "green"));
                const label = document.createElement("span");
                label.textContent = clean;
                cell.appendChild(label);
                if (!isLeft) cell.appendChild(createBox(outerKey, STATES, "green"));
            }
            return cell;
        }

        // Build grid
        const grid = document.getElementById("food-grid");
        FOOD_LIST.forEach(pair => {
            const row = document.createElement("div");
            row.className = "row";
            row.appendChild(createCell(pair[0], true));
            row.appendChild(createCell(pair[1], false));
            grid.appendChild(row);
        });

        // Text box save/load
        const notes = document.getElementById("notes");
        notes.value = localStorage.getItem("notes_value") || "";
        notes.addEventListener("input", () => {
            localStorage.setItem("notes_value", notes.value);
        });

        // Reset buttons
        document.getElementById("reset-text").onclick = () => {
            notes.value = "";
            localStorage.removeItem("notes_value");
        };

        document.getElementById("reset-all").onclick = () => {
            FOOD_LIST.forEach(pair => {
                pair.forEach(name => {
                    const clean = name.replace("$", "").trim().toLowerCase();
                    localStorage.setItem("outer_" + clean, "green"); // only outer boxes
                });
            });
            location.reload(); // refresh to show changes
        };
    </script>

</body>

</html>
